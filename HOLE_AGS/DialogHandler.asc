// new module script

function TriggerDialog(int DialogID) {
  // DialogID is specific to dialog being called, 0 means undefined and error
  
  if (gDebug == true) {
    return;
  }
  
  Wait(30);
  
  // Setup cRadio for dialog needs
  cRadio.Transparency = 100;
  cRadio.x = player.x;
  cRadio.y = player.y;
  
  if (DialogID == 0) { // This should not happen,  bad call!
    player.Say("I feel like talking to myself...");
    return;
  }
  
  if (DialogID == 1) { // Intro chat
    cRadio.SayAt(140, 30, 160, "Testing 1, 2, 3");
    cRadio.SayAt(140, 30, 160, "Can you hear me okay down there?");
    player.Say("I hear you");
    player.Say("Heading deeper now, just keep an eye on things for me");
    cRadio.SayAt(140, 30, 160, "Don't you worry, just try not to strain the rope too much with any hard stops");
    return;
  }
  
  if (DialogID == 2) { // Close call
    cRadio.SayAt(140, 30, 160, "Whoooah!");
    Wait(60);
    player.Say("What was that?");
    cRadio.SayAt(140, 30, 160, "Lots of strain on the rope just now");
    cRadio.SayAt(140, 30, 160, "Did you do a hard stop at high speed or something?");
    Wait(60);
    player.Say("I might have been a little fast there");
    cRadio.SayAt(140, 30, 160, "The rope can only handle so much, not to mention the old rigging up here");
    cRadio.SayAt(140, 30, 160, "Don't push your luck too much, take it nice and slow, okay?");
    player.Say("I'll try");
    player.Say("It's a long way down, though, takes ages to find anything!");
    return;
  }
  
  if (DialogID == 3) { // First rope snap
    if (Game.DoOnceOnly("Speedwarning")) {
      cRadio.SayAt(140, 30, 160, "Whoooah!");
      Wait(60);
      player.Say("What was that?");
      cRadio.SayAt(140, 30, 160, "Lots of strain on the rope just now");
      cRadio.SayAt(140, 30, 160, "Did you do a hard stop at high speed or something?");
      Wait(60);
      player.Say("I might have been a little fast there");
      cRadio.SayAt(140, 30, 160, "The rope can only handle so much, not to mention the old rigging up here");
      cRadio.SayAt(140, 30, 160, "Don't push your luck too much, take it nice and slow, okay?");
      player.Say("I'll try");
      player.Say("It's a long way down, though, takes ages to find anything!");
    } else {
      cRadio.SayAt(140, 30, 160, "Whoah-whoah-whoah!");
      Wait(60);
      player.Say("Too fast again?");
      cRadio.SayAt(140, 30, 160, "Way too fast, I can hear this rig tearing itself apart");
      cRadio.SayAt(140, 30, 160, "You need to slow down or either the rig or the rope will just snap on you!");
      player.Say("Okay, okay");
      player.Say("I'll try");
      player.Say("Just getting impatient, I guess");
    }
    return;
  }
  
  if (DialogID == 4) { // Half Reel
    if (Game.DoOnceOnly("HalfReelWarning")) {
      cRadio.SayAt(140, 30, 160, "How are you doing with the rope reel?");
      player.Say("Looks like I've got about half of the reel left");
      cRadio.SayAt(140, 30, 160, "Gotcha");
      cRadio.SayAt(140, 30, 160, "When you get closer to running out we'll take a break so you can setup new rigging down there");
      cRadio.SayAt(140, 30, 160, "I'll lower a new spool for you then so you can keep going down");
      player.Say("Sounds good to me");
    } else {
      player.Say("Heads up: looks like I've got about half of the reel left");
    }
    return;
  }
  
  if (DialogID == 5) { // Low Reel
    if (Game.DoOnceOnly("LowReelWarning")) {
      player.Say("Almost out of rope down here");
      cRadio.SayAt(140, 30, 160, "I hear you");
      cRadio.SayAt(140, 30, 160, "Let's make the most of it, but take it slow");
      cRadio.SayAt(140, 30, 160, "We'll want to stop right before it runs out, but don't let it go too far");
      player.Say("I'll try to be careful");
    } else {
      player.Say("Running low on rope here, need to slow things down");
    }
    return;
  }
  
  if (DialogID == 6) { // Start reel change
    if (Game.DoOnceOnly("ReelChangeA")) {
      player.Say("Okay, this looks like a good spot to take a break");
      cRadio.SayAt(140, 30, 160, "All right, you know the drill");
      cRadio.SayAt(140, 30, 160, "Set up the rigging to support your next descent");
      player.Say("I'm on it");
      cRadio.SayAt(140, 30, 160, "Once you're finished I'll lower you a new reel of rope");
      cRadio.SayAt(140, 30, 160, "With that and the new riggigng you should be able to get even deeper down");
      player.Say("I can hardly wait");
      if (gScore > 5) {
        cRadio.SayAt(140, 30, 160, "You're doing good work down there");
        cRadio.SayAt(140, 30, 160, "If you keep this up we'll both get a pretty nice payday out of all this");
      } else {
        cRadio.SayAt(140, 30, 160, "Hey, I know this isn't exactly glamorous work");
        cRadio.SayAt(140, 30, 160, "But let's try to make the most out of it, okay?");
        player.Say("Sure, I didn't mean to sound so sarcastic");
        player.Say("Let's just get to work again");
      }
    } else {
      player.Say("Okay, I'm ready to set up the new rigging I think");
      player.Say("Get ready to lower down the next reel");
      cRadio.SayAt(140, 30, 160, "Coming down to you in just a minute");
    }
    return;
  }
  
  if (DialogID == 7) { // Finish reel change
    if (Game.DoOnceOnly("ReelChangeB")) {
      player.Say("Almost out of rope down here");
      cRadio.SayAt(140, 30, 160, "I hear you");
      cRadio.SayAt(140, 30, 160, "Let's make the most of it, but take it slow");
      cRadio.SayAt(140, 30, 160, "We'll want to stop right before it runs out, but don't let it go too far");
      player.Say("I'll try to be careful");
    } else {
      player.Say("I've got the fresh reel of rope ready to go");
    }
    return;
  }
  
  
  // If we reached here, we called for a non-existent dialog ID
  player.Say("I feel like talking to myself...");
  return;
} export TriggerDialog;