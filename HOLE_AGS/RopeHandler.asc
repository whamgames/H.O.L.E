// Rope Handled script

function RopeLockEngaged() {
  // Is called in the main game loop
  // Checks down arrow key press state and sets gRopeLocked to true if key is NOT pressed
  if (IsKeyPressed(eKeyDownArrow) == true) {
    gRopeLocked = false;
    deLabSpeed.TextColor = 65535;
    return false;
  } else {
    gRopeLocked = true;
    deLabSpeed.TextColor = 64073;
    return true;
  }
} export RopeLockEngaged;





function RopeMainProcess() {
  // Handles frame-by-frame rope logic
  RopeLockEngaged(); // Updates the rope lock state
  
  if (gRopeLocked == false) { // Rope is NOT locked, so accelerate
    gRopeVelocity += gRopeGravity / ((gRopeVelocity / 2.0) + 1.0);
    if (gRopeVelocity > gRopeMaxVelocity) {gRopeVelocity = gRopeMaxVelocity;}
  } else { // Rope IS locked, so halt & process other inputs
    if (gRopeVelocity >= gRopeBreakTension) {
      Display("SNAP - The rope has snapped under tension");
      Display("You are dead");
      gRopeSnapped = true;
    }
    
    if (gRopeVelocity > 0.0) { // If we had velocity and locked,  we now stop
      gRopeVelocity = gRopeVelocity * -1.0; // Velocity is set to negative value so it can be used to gauge animation type needed in room 11 script
    }
    
  }
} export RopeMainProcess;